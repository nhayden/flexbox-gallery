<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" type="text/css" href=""> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>title</title>

    <style>


    </style>

    <script type="text/javascript">
      var starttime = (new Date()).getTime();
      function timeFromStart() { return (new Date()).getTime() - starttime; }

      function loadBackground() {
        console.log("starting... " + timeFromStart());
        $(new Image()).attr({
          'src': SPARKLER_SRC,
          'width': "50%"
        }).on('load', function() {
          console.log("image loaded " + timeFromStart()); $("#container img:first").after($(this).hide().fadeIn(500));
        });

        // }).on('load', function() { $(this).appendTo($("#container")).hide().fadeIn(1000); });
        // let sparkler = new Image();
        // sparkler.src = SPARKLER_SRC;
        // $("#container").appendChild(sparkler);
      }
      // loadBackground();

      function makeDaddyProud() {
        $(".replacer").each(function() {
          const IMGELT = $(this);
          console.log($(this));
          let fullResSource = $(this).data("fullres");
          console.log("creating image obj... " + timeFromStart());

          $(new Image()).attr('src', fullResSource).one('load', function() {
            console.log("new image loaded " + timeFromStart());
            IMGELT.animate({
              opacity: 0.7,
              width: "45%"
            }, {
              duration: 400,
              complete: () => { IMGELT.attr('src', fullResSource); }
            }).fadeTo(400, 1, () => console.log("done fading in " + timeFromStart()));

            console.log(("finished swapping source " + timeFromStart()));

          })
        });
      }

      $(function() {
        console.log("done loading document! " + timeFromStart());
        makeDaddyProud();

      })

      $(window).on('load', function() {
        console.log("done loading window! " + timeFromStart());
      });
    </script>
  </head>
  <body>
<div id="container" style="display: flex; flex-flow: row wrap; align-items: center; align-content: center; min-width: 250px;">


<img class="replacer thumb" data-fullres="https://i.4cdn.org/wg/1506017263977.jpg" src="https://i.4cdn.org/wg/1506017263977s.jpg">
<img class="replacer thumb" data-fullres="https://i.4cdn.org/wg/1505842096940.jpg" src="https://i.4cdn.org/wg/1505842096940s.jpg">
<img class="replacer thumb" data-fullres="https://i.4cdn.org/wg/1506016053953.jpg" src="https://i.4cdn.org/wg/1506016053953s.jpg">
<img class="replacer thumb" data-fullres="https://i.4cdn.org/wg/1504991693131.jpg" src="https://i.4cdn.org/wg/1504991693131s.jpg">

<!-- copies of the images to slow down loading for eaiser observation -->
<!-- <img style="display: none;" src="https://i.4cdn.org/wg/1506017263977.jpg">
<img style="display: none;" src="https://i.4cdn.org/wg/1504991693131.jpg"> -->


</div>


<script>


// $(window).on('load', function() {
//   console.log("done loading window! " + timeFromStart());
// });
//
// $(function() {
//   console.log("done loading document! " + timeFromStart());
// })

</script>
  </body>
</html>
